
/**
 * Sonic Gauage jQuery Plugin v0.1
 * jQuery plugin to create and display SVG gauges using Raphaï¿½lJS
 * 
 * Copyright (c) 2013 Andy Burton (http://andyburton.co.uk)
 * GitHub https://github.com/andyburton/Sonic-Gauge
 * 
 * Licensed under the MIT license (http://andyburton.co.uk/license/mit.txt)
 */

(function(b){var a={init:function(c){this.options=b.extend({},b.fn.SonicGauge.defaultOptions);this.settings={};this.SonicGauge("setOptions",c);this.SonicGauge("draw");return this},setOptions:function(c){if(c){if(c.style){b.extend(this.options.style,c.style)}delete c.style;b.extend(this.options,c)}this.settings.canvas_d=this.options.diameter;this.settings.canvas_r=this.settings.canvas_d/2;this.settings.speedo_d=this.settings.canvas_d-this.options.margin*2;this.settings.speedo_r=this.settings.speedo_d/2;this.settings.increment=(this.options.end.angle-this.options.start.angle)/this.options.end.num;return this},draw:function(){this.gauge=Raphael(this.attr("id"),this.settings.canvas_d,this.settings.canvas_d);var e=this.gauge.circle(this.settings.canvas_r,this.settings.canvas_r,this.settings.speedo_r).attr(this.options.style.outline);var c=this.gauge.circle(this.settings.canvas_r,this.settings.canvas_r,this.options.style.center.diameter).attr(this.options.style.center);if(this.options.label){var d=this.gauge.text(this.settings.canvas_r,this.settings.canvas_r-(this.settings.canvas_r/4),this.options.label).attr(this.options.style.label)}var f=this;var g=[];b.each(this.options.markers,function(){if(this.line){if(!this.line.width){this.line.width=10}var q=f.gauge.rect(f.settings.canvas_r+f.settings.speedo_r-this.line.width,f.settings.canvas_r,this.line.width,1).attr(this.line).hide()}var i=this.divide?f.options.end.num*this.divide:f.options.end.num;for(var j=0;j<=i;j+=this.gap){var h=this.divide?j/this.divide:j;if(b.inArray(h,g)>=0){continue}g.push(h);if(this.toFixed){h=h.toFixed(this.toFixed)}if(this.toPrecision){h=h.toPrecision(this.toPrecision)}var n=f.settings.increment*h+f.options.start.angle;if(this.line){var k=q.clone().rotate(n,f.settings.canvas_r,f.settings.canvas_r)}if(this.text){if(!this.text.space){this.text.space=0}var l=n.toRadians();var o=f.settings.canvas_r+(this.text.space+f.settings.speedo_r)*Math.cos(l);var m=f.settings.canvas_r+(this.text.space+f.settings.speedo_r)*Math.sin(l);var p=f.gauge.text(o,m,h).attr(this.text)}}if(this.line){q.remove()}});this.needle=this.gauge.rect(this.settings.canvas_r,this.settings.canvas_r,this.settings.speedo_r,1).attr(this.options.style.needle).hide();this.needle.transform("r"+(this.settings.increment*this.options.default_num+this.options.start.angle)+","+this.settings.canvas_r+","+this.settings.canvas_r).show();return this},val:function(c){this.needle.animate({transform:"r"+(this.settings.increment*c+this.options.start.angle)+","+this.settings.canvas_r+","+this.settings.canvas_r},this.options.animation_speed);return this}};b.fn.SonicGauge=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.SonicGauge")}}};b.fn.SonicGauge.defaultOptions={margin:35,diameter:350,start:{angle:-225,num:0},end:{angle:45,num:100},default_num:0,animation_speed:1000,markers:[{gap:10,line:{width:20,stroke:"none",fill:"#eeeeee"},text:{space:22,"text-anchor":"middle",fill:"#333333","font-size":18}},{gap:5,line:{width:8,stroke:"none",fill:"#999999"}}],style:{outline:{fill:"#333333",stroke:"#555555","stroke-width":8},center:{fill:"#eeeeee",diameter:10},needle:{stroke:"none",fill:"#cc0000"}}}})(jQuery);if(typeof(Number.prototype.toRadians)==="undefined"){Number.prototype.toRadians=function(){return this*Math.PI/180}};